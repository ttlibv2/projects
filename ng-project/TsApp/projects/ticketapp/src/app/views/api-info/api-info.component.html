<ts-card [style]="{'max-width': '720px'}" id="api-info-fr" [header]="headerLabel">
    <form [formGroup]="form" class="grid sm">
        <div class="p-fluid col-12 flex gap-2">

            <p-dropdown id="api_info" [options]="lsApi" optionLabel="displayName" dataKey="api_id"
                formControlName="api_item" (onChange)="onSelectApi($event.value)" class="flex-1"></p-dropdown>

            <p-button type="button" icon="pi pi-sync" pTooltip="{{'actions.get_all'|translate}}" [disabled]="!!action"
                [loading]="state.loadDs" (onClick)="clickLoadApiInfo()" *ngIf="state.visibleBtnLoadApi"></p-button>

            <p-button type="button" icon="pi pi-user-edit" (onClick)="clickEditApi()"
                *ngIf="isEditTT && state.showAction" pTooltip="{{'actions.edit' | translate}}"></p-button>

            <p-button type="button" icon="pi pi-copy" [disabled]="state.disableButton" (onClick)="clickCopyApi()"
                *ngIf="isAllowCopy && state.showAction" pTooltip="{{'actions.copy' | translate}}"></p-button>
        </div>
        <ng-container formGroupName="api_info">
            <p-divider class="col-12" layout="horizontal" align="left" *ngIf="divider">
                <span>{{'api.api_info' | translate}}</span>
            </p-divider>
            <div class="p-fluid col-12 sm:col-6">
                <label for="base_url">{{ 'api.base_url'|translate }}</label>
                <input id="base_url" pInputText formControlName="base_url" />
            </div>
            <div class="p-fluid col-6 sm:col-3">
                <label for="app_uid">{{ 'api.app_uid'|translate }}</label>
                <input id="app_uid" pInputText formControlName="app_uid" />
            </div>
            <div class="p-fluid col-6 sm:col-3">
                <label for="app_name">{{ 'api.app_name'|translate }}</label>
                <input id="app_name" pInputText formControlName="app_name" />
            </div>
            <ng-container *ngIf="!!action">
                <div class="p-fluid col-6 xxl:col-6">
                    <label for="title">{{ 'api.title'|translate }}</label>
                    <input id="title" pInputText formControlName="title" />
                </div>
                <div class="p-fluid col-6 xxl:col-6">
                    <label for="login_path">{{ 'api.login_path'|translate }}</label>
                    <input id="login_path" pInputText formControlName="login_path" />
                </div>
                <div class="p-fluid col-6 xxl:col-6">
                    <label for="headers">{{ 'api.headers'|translate }}</label>
                    <input id="headers" pInputText formControlName="headers" />
                </div>
                <div class="p-fluid col-6 xxl:col-6">
                    <label for="queries">{{ 'api.queries'|translate }}</label>
                    <input id="queries" pInputText formControlName="queries" />
                </div>
                <div class="p-fluid col-6 xxl:col-6">
                    <label for="summary">{{ 'api.summary'|translate }}</label>
                    <textarea id="summary" rows="2" autoResize="false" pInputTextarea
                        formControlName="summary"></textarea>
                </div>
                <div class="p-fluid col-6 xxl:col-6">
                    <label for="summary">{{ 'api.links'|translate }}</label>
                    <textarea id="links" rows="2" autoResize="false" pInputTextarea formControlName="links"></textarea>
                </div>
            </ng-container>
        </ng-container>
        <p-divider class="col-12" layout="horizontal" align="left" *ngIf="!!action">{{'api.user_info' |
                        translate}}</p-divider>
        <ng-container formGroupName="user_api">
            <div class="p-fluid col-6">
                <label for="user_name">{{ 'users.user_name'|translate }} <span class="text-danger">*</span></label>
                <input id="user_name" pInputText formControlName="user_name" type="email" />
            </div>
            <div class="p-fluid col-6">
                <label for="password">{{ 'users.password' | translate }} <span class="text-danger">*</span></label>
                <p-password id="password" formControlName="password" [toggleMask]="true"></p-password>
            </div>
            <div class="p-fluid col-6">
                <label for="ts_name">{{ 'users.ts_name'|translate }}</label>
                <input id="ts_name" pInputText formControlName="ts_name" />
            </div>
            <div class="p-fluid col-6">
                <label for="ts_email">{{ 'users.ts_email'|translate }}</label>
                <input id="ts_email" pInputText formControlName="ts_email" />
            </div>
            <div class="p-fluid col-6">
                <label for="csrf_token">{{ 'users.csrf_token'|translate }}</label>
                <input id="csrf_token" pInputText formControlName="csrf_token" />
            </div>
            <div class="p-fluid col-6">
                <label for="cookie_value">{{ 'users.cookie'|translate }}</label>
                <input id="cookie_value" pInputText formControlName="cookie_value" />
            </div>
            <div class="field col-12 flex flex-wrap gap-2">
                <p-checkbox id="auto_login" [binary]="true" formControlName="auto_login"
                    label="{{'api.auto_login'|translate}}"></p-checkbox>

                <p-checkbox id="editOnly" [binary]="true" formControlName="allow_edit"
                    label="{{'api.allow_edit'|translate}}"></p-checkbox>

                <p-checkbox id="saveLog" [binary]="true" formControlName="save_log"
                    label="{{'api.save_log'|translate}}"></p-checkbox>
            </div>
        </ng-container>
        <div class="col-12 flex gap-2 mt-2 justify-content-between">
            <div class="flex flex-wrap gap-2">
                <p-button type="submit" icon="pi pi-save" label="{{'actions.save'|translate}}" severity="danger"
                    (onClick)="clickSaveApi()" [disabled]="!formDirty" [loading]="state.asyncSave"
                    loadingIcon="pi pi-sync" *ngIf="visibleSaveButton"></p-button>

                <p-button icon="pi pi-save" label="{{'actions.cancel'|translate}}" severity="help"
                    (onClick)="clickResetApi()" *ngIf="visibleResetButton"></p-button>

                <p-button type="button" icon="pi pi-check" label="{{'actions.check_api' | translate}}"
                    (onClick)="clickCheckLogin()" [loading]="state.asyncCheck" loadingIcon="pi pi-sync"
                    *ngIf="visibleCheckButton"></p-button>

                <p-button type="button" icon="pi pi-link" label="{{'actions.update_link' | translate}}"
                    (onClick)="clickMenuApi()" [loading]="state.asyncMenu" loadingIcon="pi pi-sync"
                    *ngIf="visibleCheckButton"></p-button>
            </div>
            <div class="flex gap-2" *ngIf="state.hasModal">
                <p-button type="button" severity="info" icon="pi pi-times" label="{{'actions.close' | translate}}"
                    (onClick)="clickCloseModal()"></p-button>
            </div>



        </div>
    </form>




</ts-card>