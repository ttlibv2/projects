<form [formGroup]="formGroup" (ngSubmit)="saveForm()" class="email-template">
    <div class="grid">
        <!-- <p-card> -->
        <div class="col-12">
            <p-divider align="left">Nội dung email</p-divider>
            <p-editor [style]="{ height: '150px' }" formControlName="html"></p-editor>
        </div>
        <p-divider class="col-12" align="left">Thông tin field</p-divider>
        <div class="col-12">
            <ng-container formArrayName="fields">
                @for (field of fields.controls; track $index) {
                    <div class="grid mb-2" [formGroup]="field">
                        <div class="p-fluid col-5 field">
                            <label>Tiêu đề DL</label>
                            <input pInputText formControlName="label">
                        </div>
                        <div class="p-fluid col-2 field">
                            <label>Mã DL</label>
                            <input pInputText formControlName="name">
                        </div>
                        <div class="p-fluid col-2 field">
                            <label>Loại dữ liệu</label>
                            <p-dropdown [options]="lsInputType" [overlayOptions]="{mode: 'modal'}"
                                formControlName="type"></p-dropdown>
                        </div>
                        <div class="p-fluid col-2 field">
                            <label>Giá trị mặc định</label>
                            <input pInputText formControlName="value">
                        </div>
                        <div class="field-remove p-fluid col-1 field flex align-items-center">
                            <p-button icon="pi pi-trash" size="small" (onClick)="removeField($index)"></p-button>
                        </div>

                    </div>
                }
            </ng-container>



        </div>
        <div class="col-12 flex gap-2 justify-content-between">
            <p-button label="Thêm field" severity="help" (onClick)="addField()"></p-button>
            <div class="flex gap-2">
                <p-button label="Lưu lại" type="submit "severity="success" [disabled]="formGroup.invalid"></p-button>
                <p-button label="Đóng" severity="info" (onClick)="closeDialog()"></p-button>
            </div>
        </div>
        <div class="col-12"></div>

        <!-- </p-card> -->

    </div>
</form>