<div class="p-card p-component" [ngClass]="styleClass" [ngStyle]="style">
    <ng-content></ng-content>

    @if(visibleHeader && (headerLeftTemplate || headerRightTemplate || headerIcon || header)) {
    <div class="p-card-header">

        <div class="p-card-header-left-wrapper">

            <!-- card-header-icon -->
            <div class="p-card-header-icon" *ngIf="headerIcon">
                <ng-container *anyTemplate="headerIcon">
                    <span [ngClass]="headerIcon"></span>
                </ng-container>
            </div>

            <!-- card-header-left -->
            <div class="p-card-header-actions" *ngIf="headerLeftTemplate">
                <ng-container *anyTemplate="headerLeftTemplate"></ng-container>
            </div>

            <!-- card-header-title -->
            <div class="p-card-header-title" *ngIf="header">
                <ng-container *anyTemplate="header">
                    <span [innerHTML]="header"></span>
                </ng-container>
            </div>

        </div>

        <!-- card-header-right -->
        <div class="p-card-header-right-wrapper" *ngIf="headerRightTemplate">
            <div class="p-card-header-actions">
                <ng-container *anyTemplate="headerRightTemplate"></ng-container>
            </div>
        </div>
    </div>
    }

    <div class="p-card-body">

        <!-- card-body-title -->
        <div class="p-card-body-title" *ngIf="title">
            <ng-container *anyTemplate="title"></ng-container>
        </div>

        <!-- card-body-subtitle -->
        <div class="p-card-body-subtitle" *ngIf="subtitle">
            <ng-container *anyTemplate="subtitle"></ng-container>
        </div>

        <!-- card-body-content -->
        <div class="p-card-body-content" [ngClass]="contentStyleClass" [ngStyle]="contentStyle">
            <ng-container *anyTemplate="contentTemplate">
                <ng-content></ng-content>
            </ng-container>
        </div>
    </div>

    @if(footerTemplate || actions?.length){
    <div class="p-card-footer" [ngClass]="ngFooterClass()" [ngStyle]="ngFooterStyle()">
        <ng-container *anyTemplate="footerTemplate">
            @if(actions?.length){
            @for (action of actions; track $index) {
            <ng-template *ngTemplateOutlet="!!actionTemplate ? actionTemplate 
                            : defaultAction; context: {$implicit: action}"></ng-template>
            }
            }
        </ng-container>
    </div>
    }

</div>

<ng-template #defaultAction let-btn>
    <button pButton [label]="btn.label" [icon]="btn.icon" [loading]="btn.loading" [loadingIcon]="btn.loadingIcon"
        (click)="btn.onClick($event)"></button>
</ng-template>